<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Commission Calculator - Complete P&L System</title>
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GLOBAL STYLES & RESET
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --background: #f8f9fa;
            --text: #2c3e50;
            --border: #dee2e6;
            --shadow: 0 5px 15px rgba(0,0,0,0.1);
            --shadow-hover: 0 8px 25px rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB NAVIGATION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tab-navigation {
            display: flex;
            background: var(--background);
            border-bottom: 3px solid var(--border);
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 18px 20px;
            background: var(--background);
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: var(--text);
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB CONTENT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CARDS & SECTIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
        }

        .card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-3px);
        }

        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           METRIC CARDS (Dashboard)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .metric-card .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .metric-card .metric-value {
            font-size: 2em;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        .metric-card.success {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .metric-card.danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }

        .metric-card.warning {
            background: linear-gradient(135deg, #ffc107, #ff9800);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORMS & INPUTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
            font-size: 0.95em;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-group input:invalid {
            border-color: var(--danger);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           EMPLOYEE CARDS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .employee-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .employee-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .employee-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .employee-header h3 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .employee-header .role {
            opacity: 0.9;
            font-size: 0.95em;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BUTTONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .button-group {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            flex: 1;
            min-width: 200px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--text);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TABLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .table-responsive {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        thead {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border);
        }

        tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        tbody tr:hover {
            background: #e9ecef;
            transition: background 0.2s ease;
        }

        .currency {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            text-align: right;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BADGES & STATUS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: var(--text);
        }

        .badge-danger {
            background: var(--danger);
            color: white;
        }

        .badge-primary {
            background: var(--primary);
            color: white;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ALERT BOXES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 600;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           P&L STATEMENT STYLING
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .pl-statement {
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 25px;
            font-family: 'Courier New', monospace;
            box-shadow: var(--shadow);
        }

        .pl-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .pl-row.header {
            font-weight: 700;
            font-size: 1.2em;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            margin-top: 20px;
        }

        .pl-row.total {
            font-weight: 700;
            font-size: 1.15em;
            background: var(--background);
            padding: 15px;
            margin: 10px -25px;
        }

        .pl-row.net-profit {
            font-weight: 700;
            font-size: 1.3em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            margin: 20px -25px -25px;
            border-radius: 0 0 8px 8px;
        }

        .pl-label {
            flex: 1;
        }

        .pl-value {
            font-weight: 600;
            text-align: right;
            min-width: 150px;
        }

        .pl-indent {
            padding-left: 30px;
        }

        .negative {
            color: var(--danger);
        }

        .positive {
            color: var(--success);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RANKING DISPLAY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ranking-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .rank-card {
            border-radius: 10px;
            padding: 25px;
            color: white;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .rank-card:hover {
            transform: scale(1.05);
        }

        .rank-card.first {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: var(--text);
        }

        .rank-card.second {
            background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
            color: var(--text);
        }

        .rank-card.third {
            background: linear-gradient(135deg, #cd7f32, #e6a664);
            color: white;
        }

        .rank-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .rank-card h3 {
            font-size: 1.8em;
            margin: 10px 0;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE DESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .tab-button {
                font-size: 0.9em;
                padding: 12px 10px;
            }

            .tab-content {
                padding: 15px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .input-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            table {
                font-size: 0.85em;
            }

            th, td {
                padding: 8px;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PRINT STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .tab-navigation,
            .button-group,
            .btn {
                display: none !important;
            }

            .tab-content {
                display: block !important;
                page-break-after: always;
            }

            .main-container {
                box-shadow: none;
            }

            .card {
                box-shadow: none;
                page-break-inside: avoid;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOADING SPINNER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NOTIFICATION TOAST
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 30px;
            background: var(--success);
            color: white;
            border-radius: 10px;
            box-shadow: var(--shadow-hover);
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .toast.show {
            display: block;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENARIO COMPARISON TABLE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .scenario-table {
            font-size: 0.95em;
        }

        .scenario-table .current-row {
            background: #fffacd !important;
            font-weight: 700;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           COST BREAKDOWN PIE CHART ALTERNATIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .cost-bar {
            height: 30px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 5px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }

        .cost-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #20c997);
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
            font-size: 0.85em;
            font-weight: 600;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MAIN CONTAINER
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="main-container">
        <!-- HEADER -->
        <div class="header">
            <h1>ğŸ’¼ HR Commission Calculator</h1>
            <p>Complete P&L Analysis & Team Performance Dashboard</p>
        </div>

        <!-- TAB NAVIGATION -->
        <div class="tab-navigation">
            <button class="tab-button active" onclick="switchTab('config')">ğŸ“ Configuration</button>
            <button class="tab-button" onclick="switchTab('dashboard')">ğŸ“Š Dashboard</button>
            <button class="tab-button" onclick="switchTab('team')">ğŸ‘¥ Team Performance</button>
            <button class="tab-button" onclick="switchTab('breakeven')">ğŸ¯ Breakeven</button>
            <button class="tab-button" onclick="switchTab('scenarios')">ğŸ“ˆ Scenarios</button>
            <button class="tab-button" onclick="switchTab('expenses')">ğŸ“‹ Expenses</button>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 1: CONFIGURATION & DATA ENTRY
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="config" class="tab-content active">
            <!-- Fixed Costs Configuration -->
            <div class="section">
                <h2 class="section-title">ğŸ’° Fixed Costs Configuration</h2>
                <div class="card">
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Team Salaries Budget (AED)</label>
                            <input type="number" id="teamSalariesBudget" value="30000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Mobile Allowance (AED)</label>
                            <input type="number" id="mobileAllowance" value="6000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Software & ATS Subscriptions (AED)</label>
                            <input type="number" id="softwareSubscriptions" value="30000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Transportation (AED)</label>
                            <input type="number" id="transportation" value="6000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Marketing & Advertising (AED)</label>
                            <input type="number" id="marketing" value="30000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Commission Reserve (AED)</label>
                            <input type="number" id="commissionReserve" value="30000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Bonus Reserve (AED)</label>
                            <input type="number" id="bonusReserve" value="7500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Refund/Replacement Reserve (AED)</label>
                            <input type="number" id="refundReserve" value="30000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Admin Salary (AED)</label>
                            <input type="number" id="adminSalary" value="12650" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Telephone/Landline (AED)</label>
                            <input type="number" id="telephone" value="500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>IT Support (AED)</label>
                            <input type="number" id="itSupport" value="2500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Accounting Services (AED)</label>
                            <input type="number" id="accountingServices" value="3000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Branding/Marketing Indirect (AED)</label>
                            <input type="number" id="brandingMarketing" value="3000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Licensing Fees (AED)</label>
                            <input type="number" id="licensingFees" value="2000" min="0" oninput="saveData()">
                        </div>
                    </div>
                    <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: center;">
                        <div style="font-size: 1.1em; opacity: 0.9;">Total Fixed Costs</div>
                        <div id="totalFixedCostsDisplay" style="font-size: 2.5em; font-weight: 700; font-family: 'Courier New', monospace;">0 AED</div>
                    </div>
                </div>
            </div>

            <!-- Revenue Parameters -->
            <div class="section">
                <h2 class="section-title">ğŸ’µ Revenue Parameters</h2>
                <div class="card">
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Blue Collar Fee per Placement (AED)</label>
                            <input type="number" id="blueCollarFee" value="500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Fee per Placement (AED)</label>
                            <input type="number" id="executiveFee" value="3000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Saifullah Share of Team Earnings (%)</label>
                            <input type="number" id="saifullahPercentage" value="20" min="0" max="100" oninput="saveData()">
                            <small style="color: #666; display: block; margin-top: 5px;">
                                ğŸ’¡ Saifullah gets this % of total team compensation (salaries + bonuses)
                            </small>
                        </div>
                        <div class="input-group">
                            <label>Working Days per Month</label>
                            <input type="number" id="workingDays" value="22" min="1" oninput="saveData()">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Commission Structure Settings -->
            <div class="section">
                <h2 class="section-title">ğŸ Commission Structure Settings</h2>
                <div class="card">
                    <div class="card-title">Individual Performance Bonuses</div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>80% Target Bonus (AED)</label>
                            <input type="number" id="bonus80" value="500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>100% Target Bonus (AED)</label>
                            <input type="number" id="bonus100" value="1000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>120% Target Bonus (AED)</label>
                            <input type="number" id="bonus120" value="2000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>150%+ Target Bonus (AED)</label>
                            <input type="number" id="bonus150" value="3500" min="0" oninput="saveData()">
                        </div>
                    </div>
                    <div class="card-title" style="margin-top: 25px;">Top Performer Bonuses</div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>ğŸ¥‡ 1st Place Bonus (AED)</label>
                            <input type="number" id="firstPlaceBonus" value="1500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>ğŸ¥ˆ 2nd Place Bonus (AED)</label>
                            <input type="number" id="secondPlaceBonus" value="800" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>ğŸ¥‰ 3rd Place Bonus (AED)</label>
                            <input type="number" id="thirdPlaceBonus" value="500" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Members Configuration -->
            <div class="section">
                <h2 class="section-title">ğŸ‘¥ Team Members Configuration</h2>
                
                <!-- EMPLOYEE 1: RAVI -->
                <div class="employee-card">
                    <div class="employee-header">
                        <h3>RAVI</h3>
                        <div class="role">Sales Executive</div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Monthly Target (Placements)</label>
                            <input type="number" id="ravi_target" value="25" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Base Salary (AED)</label>
                            <input type="number" id="ravi_salary" value="2500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Blue Collar Placements This Month</label>
                            <input type="number" id="ravi_bc" value="0" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Placements This Month</label>
                            <input type="number" id="ravi_exec" value="0" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE 2: KAJA -->
                <div class="employee-card">
                    <div class="employee-header">
                        <h3>KAJA</h3>
                        <div class="role">Sales Executive</div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Monthly Target (Placements)</label>
                            <input type="number" id="kaja_target" value="25" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Base Salary (AED)</label>
                            <input type="number" id="kaja_salary" value="2500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Blue Collar Placements This Month</label>
                            <input type="number" id="kaja_bc" value="0" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Placements This Month</label>
                            <input type="number" id="kaja_exec" value="0" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE 3: ROMIL -->
                <div class="employee-card">
                    <div class="employee-header">
                        <h3>ROMIL</h3>
                        <div class="role">Sales Intern</div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Monthly Target (Placements)</label>
                            <input type="number" id="romil_target" value="15" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Base Salary (AED)</label>
                            <input type="number" id="romil_salary" value="1000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Blue Collar Placements This Month</label>
                            <input type="number" id="romil_bc" value="0" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Placements This Month</label>
                            <input type="number" id="romil_exec" value="0" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE 4: SABA -->
                <div class="employee-card">
                    <div class="employee-header">
                        <h3>SABA</h3>
                        <div class="role">Recruiter</div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Monthly Target (Placements)</label>
                            <input type="number" id="saba_target" value="20" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Base Salary (AED)</label>
                            <input type="number" id="saba_salary" value="2500" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Blue Collar Placements This Month</label>
                            <input type="number" id="saba_bc" value="0" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Placements This Month</label>
                            <input type="number" id="saba_exec" value="0" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE 5: NIROSHAN -->
                <div class="employee-card">
                    <div class="employee-header">
                        <h3>NIROSHAN</h3>
                        <div class="role">Supervisor</div>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Monthly Target (Placements)</label>
                            <input type="number" id="niroshan_target" value="10" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Base Salary (AED)</label>
                            <input type="number" id="niroshan_salary" value="3000" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Blue Collar Placements This Month</label>
                            <input type="number" id="niroshan_bc" value="0" min="0" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Executive Placements This Month</label>
                            <input type="number" id="niroshan_exec" value="0" min="0" oninput="saveData()">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculate Button -->
            <div class="button-group">
                <button class="btn btn-primary" onclick="calculate()">ğŸ”„ CALCULATE ALL METRICS</button>
                <button class="btn btn-warning" onclick="clearData()">ğŸ—‘ï¸ Clear All Data</button>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 2: FINANCIAL DASHBOARD
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="dashboard" class="tab-content">
            <!-- Top Metrics -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">ğŸ“ˆ Total Revenue</div>
                    <div class="metric-value" id="metric_totalRevenue">0 AED</div>
                </div>
                <div class="metric-card warning">
                    <div class="metric-label">ğŸ’¼ Saifullah's Share (20% of Team Earnings)</div>
                    <div class="metric-value" id="metric_saifullahShare">0 AED</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">ğŸ“‰ Breakeven Needed</div>
                    <div class="metric-value" id="metric_breakeven">0 AED</div>
                </div>
                <div class="metric-card" id="metric_netProfit_card">
                    <div class="metric-label">ğŸ’µ Net Profit</div>
                    <div class="metric-value" id="metric_netProfit">0 AED</div>
                </div>
            </div>

            <!-- P&L Statement -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š Profit & Loss Statement</h2>
                <div class="pl-statement">
                    <div class="pl-row header">
                        <div class="pl-label">REVENUE</div>
                        <div class="pl-value"></div>
                    </div>
                    <div class="pl-row pl-indent">
                        <div class="pl-label">Total Team Revenue</div>
                        <div class="pl-value" id="pl_totalRevenue">0 AED</div>
                    </div>

                    <div class="pl-row header">
                        <div class="pl-label">TEAM COMPENSATION</div>
                        <div class="pl-value"></div>
                    </div>
                    <div class="pl-row pl-indent">
                        <div class="pl-label">Team Base Salaries</div>
                        <div class="pl-value" id="pl_baseSalaries">0 AED</div>
                    </div>
                    <div class="pl-row pl-indent">
                        <div class="pl-label">Individual Performance Bonuses</div>
                        <div class="pl-value" id="pl_individualBonuses">0 AED</div>
                    </div>
                    <div class="pl-row pl-indent">
                        <div class="pl-label">Top Performer Bonuses</div>
                        <div class="pl-value" id="pl_topPerformerBonuses">0 AED</div>
                    </div>
                    <div class="pl-row total pl-indent">
                        <div class="pl-label">Total Team Compensation</div>
                        <div class="pl-value" id="pl_teamCompensation">0 AED</div>
                    </div>
                    <div class="pl-row pl-indent" style="background: #fff3cd;">
                        <div class="pl-label"><strong>Less: Saifullah Share (<span id="pl_saifullahPercent">20</span>% of Team Comp)</strong></div>
                        <div class="pl-value negative" id="pl_saifullahShare">(0 AED)</div>
                    </div>
                    <div class="pl-row total pl-indent">
                        <div class="pl-label">Net Team Compensation Cost</div>
                        <div class="pl-value" id="pl_netTeamCost">0 AED</div>
                    </div>

                    <div class="pl-row header">
                        <div class="pl-label">OTHER OPERATING EXPENSES</div>
                        <div class="pl-value"></div>
                    </div>
                    <div class="pl-row pl-indent">
                        <div class="pl-label">Fixed Operational Costs</div>
                        <div class="pl-value" id="pl_fixedCosts">0 AED</div>
                    </div>
                    
                    <div class="pl-row total pl-indent">
                        <div class="pl-label">Total Operating Expenses</div>
                        <div class="pl-value" id="pl_totalExpenses">0 AED</div>
                    </div>

                    <div class="pl-row net-profit">
                        <div class="pl-label">NET PROFIT / (LOSS)</div>
                        <div class="pl-value" id="pl_netProfit">0 AED</div>
                    </div>
                    <div class="pl-row" style="background: var(--background); padding: 15px; margin: 0 -25px -25px;">
                        <div class="pl-label">Profit Margin</div>
                        <div class="pl-value" id="pl_profitMargin">0.00%</div>
                    </div>
                </div>
            </div>

            <!-- Cost Breakdown -->
            <div class="section">
                <h2 class="section-title">ğŸ’¸ Fixed Cost Breakdown</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Cost Category</th>
                                <th>Amount (AED)</th>
                                <th>% of Fixed Costs</th>
                                <th>% of Revenue</th>
                            </tr>
                        </thead>
                        <tbody id="costBreakdownTable">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Key Financial Ratios -->
            <div class="section">
                <h2 class="section-title">ğŸ“ Key Financial Ratios</h2>
                <div class="metrics-grid">
                    <div class="card">
                        <div class="card-title">Team Compensation Ratio</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--primary); font-family: 'Courier New', monospace;" id="ratio_labor">0.00%</div>
                        <div style="margin-top: 10px; color: #666;">Total team comp (before Saifullah) as % of revenue</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Fixed Cost Ratio</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--primary); font-family: 'Courier New', monospace;" id="ratio_fixed">0.00%</div>
                        <div style="margin-top: 10px; color: #666;">Fixed costs as % of revenue</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Saifullah Cost Ratio</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--warning); font-family: 'Courier New', monospace;" id="ratio_saifullah">0.00%</div>
                        <div style="margin-top: 10px; color: #666;">Saifullah share as % of revenue</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Total Labor Cost Ratio</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--primary); font-family: 'Courier New', monospace;" id="ratio_totalLabor">0.00%</div>
                        <div style="margin-top: 10px; color: #666;">Team comp + Saifullah as % of revenue</div>
                    </div>
                </div>
            </div>

            <!-- Viability Alert -->
            <div id="viabilityAlert">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Action Buttons -->
            <div class="button-group">
                <button class="btn btn-success" onclick="exportCSV()">ğŸ“¥ Download CSV Report</button>
                <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print Report</button>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 3: TEAM PERFORMANCE
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="team" class="tab-content">
            <!-- Individual Performance Table -->
            <div class="section">
                <h2 class="section-title">ğŸ‘¥ Individual Performance Metrics</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Employee</th>
                                <th>Role</th>
                                <th>Target</th>
                                <th>BC</th>
                                <th>Exec</th>
                                <th>Total</th>
                                <th>Achievement</th>
                                <th>Status</th>
                                <th>Revenue</th>
                                <th>Base Salary</th>
                                <th>Ind. Bonus</th>
                                <th>Top Bonus</th>
                                <th>Total Comp</th>
                                <th>ROI</th>
                            </tr>
                        </thead>
                        <tbody id="teamPerformanceTable">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Top Performers -->
            <div class="section">
                <h2 class="section-title">ğŸ† Top Performers Ranking</h2>
                <div class="ranking-cards" id="topPerformersRanking">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Team Summary -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š Team Summary Metrics</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Placements</div>
                        <div class="metric-value" id="summary_totalPlacements">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Revenue</div>
                        <div class="metric-value" id="summary_totalRevenue">0 AED</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Team Compensation</div>
                        <div class="metric-value" id="summary_teamComp">0 AED</div>
                    </div>
                    <div class="metric-card warning">
                        <div class="metric-label">Saifullah's Share</div>
                        <div class="metric-value" id="summary_saifullahShare">0 AED</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 4: BREAKEVEN ANALYSIS
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="breakeven" class="tab-content">
            <!-- Current vs Breakeven -->
            <div class="section">
                <h2 class="section-title">ğŸ¯ Current vs Breakeven Comparison</h2>
                <div class="card">
                    <div class="metrics-grid">
                        <div>
                            <div style="font-size: 1.1em; color: #666; margin-bottom: 10px;">Current Monthly Revenue</div>
                            <div style="font-size: 2.5em; font-weight: 700; color: var(--primary); font-family: 'Courier New', monospace;" id="be_currentRevenue">0 AED</div>
                        </div>
                        <div>
                            <div style="font-size: 1.1em; color: #666; margin-bottom: 10px;">Breakeven Required</div>
                            <div style="font-size: 2.5em; font-weight: 700; color: var(--warning); font-family: 'Courier New', monospace;" id="be_breakevenRequired">0 AED</div>
                        </div>
                        <div>
                            <div style="font-size: 1.1em; color: #666; margin-bottom: 10px;">Gap</div>
                            <div style="font-size: 2.5em; font-weight: 700; font-family: 'Courier New', monospace;" id="be_gap">0 AED</div>
                        </div>
                        <div>
                            <div style="font-size: 1.1em; color: #666; margin-bottom: 10px;">Status</div>
                            <div style="font-size: 1.8em; font-weight: 700; margin-top: 20px;" id="be_status">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daily Targets -->
            <div class="section">
                <h2 class="section-title">ğŸ“… Daily Revenue Targets</h2>
                <div class="metrics-grid">
                    <div class="card">
                        <div class="card-title">Working Days</div>
                        <div style="font-size: 3em; font-weight: 700; color: var(--primary); font-family: 'Courier New', monospace;" id="be_workingDays">22</div>
                        <div style="margin-top: 10px; color: #666;">Days per month</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Daily Breakeven</div>
                        <div style="font-size: 2em; font-weight: 700; color: var(--warning); font-family: 'Courier New', monospace;" id="be_dailyBreakeven">0 AED</div>
                        <div style="margin-top: 10px; color: #666;">Minimum revenue per day</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Current Daily Avg</div>
                        <div style="font-size: 2em; font-weight: 700; font-family: 'Courier New', monospace;" id="be_currentDaily">0 AED</div>
                        <div style="margin-top: 10px; color: #666;">Based on current performance</div>
                    </div>
                </div>
            </div>

            <!-- Placement Scenarios -->
            <div class="section">
                <h2 class="section-title">ğŸ² Placement Scenarios to Hit Breakeven</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Mix</th>
                                <th>Total Placements Needed</th>
                                <th>Per Day</th>
                                <th>Blue Collar</th>
                                <th>Executive</th>
                            </tr>
                        </thead>
                        <tbody id="scenariosTable">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 5: SCENARIO ANALYSIS
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="scenarios" class="tab-content">
            <div class="section">
                <h2 class="section-title">ğŸ“ˆ Performance Scenario Projections</h2>
                <p style="margin-bottom: 20px; color: #666; font-size: 1.1em;">Compare P&L outcomes at different team performance levels</p>
                <div class="table-responsive">
                    <table class="scenario-table">
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Revenue (AED)</th>
                                <th>Team Comp</th>
                                <th>Saifullah Share</th>
                                <th>Fixed Costs</th>
                                <th>Total Costs</th>
                                <th>Net Profit</th>
                                <th>Margin %</th>
                            </tr>
                        </thead>
                        <tbody id="scenarioAnalysisTable">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TAB 6: EXPENSE REPORT
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="expenses" class="tab-content">
            <div class="section">
                <h2 class="section-title">ğŸ“‹ Detailed Expense Analysis</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Expense Category</th>
                                <th>Amount (AED)</th>
                                <th>% of Revenue</th>
                                <th>% of Total Expenses</th>
                                <th>Industry Benchmark</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="expenseReportTable">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Expense Visualization -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š Expense Distribution</h2>
                <div class="card" id="expenseVisualization">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         JAVASCRIPT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // GLOBAL STATE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let calculationResults = {};

        // Employee definitions
        const employees = [
            { id: 'ravi', name: 'RAVI', role: 'Sales Executive' },
            { id: 'kaja', name: 'KAJA', role: 'Sales Executive' },
            { id: 'romil', name: 'ROMIL', role: 'Sales Intern' },
            { id: 'saba', name: 'SABA', role: 'Recruiter' },
            { id: 'niroshan', name: 'NIROSHAN', role: 'Supervisor' }
        ];

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // HELPER FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function getValue(id) {
            const element = document.getElementById(id);
            return element ? parseFloat(element.value) || 0 : 0;
        }

        function formatCurrency(value) {
            return value.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' AED';
        }

        function formatPercent(value) {
            return value.toFixed(2) + '%';
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'success' ? 'var(--success)' : 'var(--danger)';
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TAB SWITCHING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function switchTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Activate corresponding button
            event.target.classList.add('active');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // DATA PERSISTENCE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function saveData() {
            const inputs = document.querySelectorAll('input[type="number"]');
            const data = {};
            inputs.forEach(input => {
                data[input.id] = input.value;
            });
            localStorage.setItem('commissionCalculatorData', JSON.stringify(data));
            
            // Update total fixed costs display in real-time
            updateFixedCostsDisplay();
        }

        function loadData() {
            const savedData = localStorage.getItem('commissionCalculatorData');
            if (savedData) {
                const data = JSON.parse(savedData);
                Object.keys(data).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = data[id];
                    }
                });
            }
            updateFixedCostsDisplay();
        }

        function clearData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.removeItem('commissionCalculatorData');
                location.reload();
            }
        }

        function updateFixedCostsDisplay() {
            const total = getValue('teamSalariesBudget') +
                          getValue('mobileAllowance') +
                          getValue('softwareSubscriptions') +
                          getValue('transportation') +
                          getValue('marketing') +
                          getValue('commissionReserve') +
                          getValue('bonusReserve') +
                          getValue('refundReserve') +
                          getValue('adminSalary') +
                          getValue('telephone') +
                          getValue('itSupport') +
                          getValue('accountingServices') +
                          getValue('brandingMarketing') +
                          getValue('licensingFees');
            
            document.getElementById('totalFixedCostsDisplay').textContent = formatCurrency(total);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MAIN CALCULATION ENGINE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function calculate() {
            showToast('Calculating...', 'success');
            
            // Initialize results object
            calculationResults = {
                employees: [],
                totals: {},
                breakdown: {},
                scenarios: []
            };

            // 1. Calculate Fixed Costs
            const fixedCosts = calculateFixedCosts();
            calculationResults.breakdown.fixedCosts = fixedCosts;

            // 2. Calculate Revenue for each employee
            const revenueParams = {
                blueCollarFee: getValue('blueCollarFee'),
                executiveFee: getValue('executiveFee'),
                saifullahPercentage: getValue('saifullahPercentage'),
                workingDays: getValue('workingDays')
            };

            employees.forEach(emp => {
                const empData = calculateEmployeeMetrics(emp, revenueParams);
                calculationResults.employees.push(empData);
            });

            // 3. Calculate Top Performers (ranking and bonuses)
            calculateTopPerformers();

            // 4. Calculate Totals (NEW FORMULA: Saifullah = 20% of Team Compensation)
            calculateTotals(revenueParams);

            // 5. Calculate Breakeven
            calculateBreakeven(revenueParams);

            // 6. Update all displays
            updateAllDisplays();

            showToast('âœ… Calculation Complete!', 'success');
        }

        function calculateFixedCosts() {
            return {
                teamSalariesBudget: getValue('teamSalariesBudget'),
                mobileAllowance: getValue('mobileAllowance'),
                softwareSubscriptions: getValue('softwareSubscriptions'),
                transportation: getValue('transportation'),
                marketing: getValue('marketing'),
                commissionReserve: getValue('commissionReserve'),
                bonusReserve: getValue('bonusReserve'),
                refundReserve: getValue('refundReserve'),
                adminSalary: getValue('adminSalary'),
                telephone: getValue('telephone'),
                itSupport: getValue('itSupport'),
                accountingServices: getValue('accountingServices'),
                brandingMarketing: getValue('brandingMarketing'),
                licensingFees: getValue('licensingFees'),
                total: 0
            };
        }

        function calculateEmployeeMetrics(emp, revenueParams) {
            const target = getValue(`${emp.id}_target`);
            const baseSalary = getValue(`${emp.id}_salary`);
            const bcPlacements = getValue(`${emp.id}_bc`);
            const execPlacements = getValue(`${emp.id}_exec`);
            
            // Revenue Calculation
            const revenue = (bcPlacements * revenueParams.blueCollarFee) + 
                           (execPlacements * revenueParams.executiveFee);
            
            // Total placements and achievement
            const totalPlacements = bcPlacements + execPlacements;
            const achievementPercentage = target > 0 ? (totalPlacements / target) * 100 : 0;
            
            // Individual Bonus Calculation
            let individualBonus = 0;
            if (achievementPercentage >= 150) {
                individualBonus = getValue('bonus150');
            } else if (achievementPercentage >= 120) {
                individualBonus = getValue('bonus120');
            } else if (achievementPercentage >= 100) {
                individualBonus = getValue('bonus100');
            } else if (achievementPercentage >= 80) {
                individualBonus = getValue('bonus80');
            }
            
            return {
                ...emp,
                target,
                baseSalary,
                bcPlacements,
                execPlacements,
                totalPlacements,
                achievementPercentage,
                revenue,
                individualBonus,
                topPerformerBonus: 0, // Will be set later
                totalCompensation: 0, // Will be calculated after top performer bonus
                roi: 0 // Will be calculated after compensation
            };
        }

        function calculateTopPerformers() {
            // Sort employees by total placements (descending)
            const sorted = [...calculationResults.employees].sort((a, b) => 
                b.totalPlacements - a.totalPlacements
            );

            // Assign top performer bonuses
            const firstPlace = getValue('firstPlaceBonus');
            const secondPlace = getValue('secondPlaceBonus');
            const thirdPlace = getValue('thirdPlaceBonus');

            sorted.forEach((emp, index) => {
                const originalEmp = calculationResults.employees.find(e => e.id === emp.id);
                if (index === 0 && emp.totalPlacements > 0) {
                    originalEmp.topPerformerBonus = firstPlace;
                    originalEmp.rank = 1;
                } else if (index === 1 && emp.totalPlacements > 0) {
                    originalEmp.topPerformerBonus = secondPlace;
                    originalEmp.rank = 2;
                } else if (index === 2 && emp.totalPlacements > 0) {
                    originalEmp.topPerformerBonus = thirdPlace;
                    originalEmp.rank = 3;
                } else {
                    originalEmp.rank = index + 1;
                }
                
                // Calculate total compensation and ROI
                originalEmp.totalCompensation = originalEmp.baseSalary + 
                                               originalEmp.individualBonus + 
                                               originalEmp.topPerformerBonus;
                originalEmp.roi = originalEmp.revenue - originalEmp.totalCompensation;
            });
        }

        function calculateTotals(revenueParams) {
            // Sum up all employee metrics
            let totalRevenue = 0;
            let totalBaseSalaries = 0;
            let totalIndividualBonuses = 0;
            let totalTopPerformerBonuses = 0;
            let totalPlacements = 0;
            let totalAchievement = 0;

            calculationResults.employees.forEach(emp => {
                totalRevenue += emp.revenue;
                totalBaseSalaries += emp.baseSalary;
                totalIndividualBonuses += emp.individualBonus;
                totalTopPerformerBonuses += emp.topPerformerBonus;
                totalPlacements += emp.totalPlacements;
                totalAchievement += emp.achievementPercentage;
            });

            // Calculate fixed costs total
            const fixedCostsTotal = Object.values(calculationResults.breakdown.fixedCosts)
                .reduce((sum, val) => sum + (typeof val === 'number' ? val : 0), 0);
            calculationResults.breakdown.fixedCosts.total = fixedCostsTotal;

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // NEW FORMULA: Saifullah gets 20% of TEAM COMPENSATION (not revenue)
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            const totalTeamCompensation = totalBaseSalaries + totalIndividualBonuses + totalTopPerformerBonuses;
            const saifullahShare = totalTeamCompensation * (revenueParams.saifullahPercentage / 100);
            const netTeamCost = totalTeamCompensation + saifullahShare;

            // Net Profit Calculation
            const totalExpenses = fixedCostsTotal + netTeamCost;
            const netProfit = totalRevenue - totalExpenses;
            const profitMargin = totalRevenue > 0 ? (netProfit / totalRevenue) * 100 : 0;

            // Calculate ratios
            const teamCompRatio = totalRevenue > 0 ? (totalTeamCompensation / totalRevenue) * 100 : 0;
            const fixedCostRatio = totalRevenue > 0 ? (fixedCostsTotal / totalRevenue) * 100 : 0;
            const saifullahCostRatio = totalRevenue > 0 ? (saifullahShare / totalRevenue) * 100 : 0;
            const totalLaborCostRatio = totalRevenue > 0 ? (netTeamCost / totalRevenue) * 100 : 0;

            calculationResults.totals = {
                totalRevenue,
                saifullahShare,
                totalBaseSalaries,
                totalIndividualBonuses,
                totalTopPerformerBonuses,
                totalTeamCompensation,
                netTeamCost,
                fixedCostsTotal,
                totalExpenses,
                netProfit,
                profitMargin,
                totalPlacements,
                avgAchievement: calculationResults.employees.length > 0 ? totalAchievement / calculationResults.employees.length : 0,
                ratios: {
                    teamCompRatio,
                    fixedCostRatio,
                    saifullahCostRatio,
                    totalLaborCostRatio
                }
            };
        }

        function calculateBreakeven(revenueParams) {
            const fixedCosts = calculationResults.totals.fixedCostsTotal;
            const totalBaseSalaries = calculationResults.totals.totalBaseSalaries;
            
            // NEW Breakeven formula considering Saifullah gets 20% of compensation
            // Revenue = Fixed Costs + Base Salaries + (Base Salaries * 20%)
            // Simplified: Revenue = Fixed Costs + Base Salaries * 1.2
            const breakevenRevenue = fixedCosts + (totalBaseSalaries * (1 + revenueParams.saifullahPercentage / 100));
            const dailyBreakeven = breakevenRevenue / revenueParams.workingDays;
            
            const currentRevenue = calculationResults.totals.totalRevenue;
            const currentDaily = currentRevenue / revenueParams.workingDays;
            const gap = currentRevenue - breakevenRevenue;
            const gapPercent = breakevenRevenue > 0 ? (gap / breakevenRevenue) * 100 : 0;

            calculationResults.breakeven = {
                breakevenRevenue,
                dailyBreakeven,
                currentRevenue,
                currentDaily,
                gap,
                gapPercent,
                isAboveBreakeven: currentRevenue >= breakevenRevenue
            };

            // Calculate placement scenarios
            const scenarios = [];
            const mixScenarios = [
                { name: '100% Blue Collar', bcPercent: 100, execPercent: 0 },
                { name: '100% Executive', bcPercent: 0, execPercent: 100 },
                { name: '70% BC / 30% Exec', bcPercent: 70, execPercent: 30 },
                { name: '50% BC / 50% Exec', bcPercent: 50, execPercent: 50 }
            ];

            mixScenarios.forEach(scenario => {
                const avgFee = (scenario.bcPercent / 100) * revenueParams.blueCollarFee + 
                              (scenario.execPercent / 100) * revenueParams.executiveFee;
                const totalPlacementsNeeded = Math.ceil(breakevenRevenue / avgFee);
                const perDay = Math.ceil(totalPlacementsNeeded / revenueParams.workingDays);
                const bcPlacements = Math.ceil(totalPlacementsNeeded * (scenario.bcPercent / 100));
                const execPlacements = Math.ceil(totalPlacementsNeeded * (scenario.execPercent / 100));

                scenarios.push({
                    name: scenario.name,
                    mix: `${scenario.bcPercent}% BC / ${scenario.execPercent}% Exec`,
                    totalPlacementsNeeded,
                    perDay,
                    bcPlacements,
                    execPlacements
                });
            });

            calculationResults.breakeven.scenarios = scenarios;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UPDATE DISPLAYS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function updateAllDisplays() {
            updateDashboard();
            updateTeamPerformance();
            updateBreakevenTab();
            updateScenarioAnalysis();
            updateExpenseReport();
        }

        function updateDashboard() {
            const totals = calculationResults.totals;
            const breakeven = calculationResults.breakeven;

            // Top metrics
            document.getElementById('metric_totalRevenue').textContent = formatCurrency(totals.totalRevenue);
            document.getElementById('metric_saifullahShare').textContent = formatCurrency(totals.saifullahShare);
            document.getElementById('metric_breakeven').textContent = formatCurrency(breakeven.breakevenRevenue);
            
            const netProfitCard = document.getElementById('metric_netProfit_card');
            document.getElementById('metric_netProfit').textContent = formatCurrency(totals.netProfit);
            
            if (totals.netProfit >= 0) {
                netProfitCard.classList.remove('danger');
                netProfitCard.classList.add('success');
            } else {
                netProfitCard.classList.remove('success');
                netProfitCard.classList.add('danger');
            }

            // P&L Statement
            document.getElementById('pl_totalRevenue').textContent = formatCurrency(totals.totalRevenue);
            document.getElementById('pl_baseSalaries').textContent = formatCurrency(totals.totalBaseSalaries);
            document.getElementById('pl_individualBonuses').textContent = formatCurrency(totals.totalIndividualBonuses);
            document.getElementById('pl_topPerformerBonuses').textContent = formatCurrency(totals.totalTopPerformerBonuses);
            document.getElementById('pl_teamCompensation').textContent = formatCurrency(totals.totalTeamCompensation);
            document.getElementById('pl_saifullahPercent').textContent = getValue('saifullahPercentage');
            document.getElementById('pl_saifullahShare').textContent = '(' + formatCurrency(totals.saifullahShare) + ')';
            document.getElementById('pl_netTeamCost').textContent = formatCurrency(totals.netTeamCost);
            document.getElementById('pl_fixedCosts').textContent = formatCurrency(totals.fixedCostsTotal);
            document.getElementById('pl_totalExpenses').textContent = formatCurrency(totals.totalExpenses);
            document.getElementById('pl_netProfit').textContent = formatCurrency(totals.netProfit);
            document.getElementById('pl_profitMargin').textContent = formatPercent(totals.profitMargin);

            // Cost Breakdown Table
            updateCostBreakdown();

            // Financial Ratios
            document.getElementById('ratio_labor').textContent = formatPercent(totals.ratios.teamCompRatio);
            document.getElementById('ratio_fixed').textContent = formatPercent(totals.ratios.fixedCostRatio);
            document.getElementById('ratio_saifullah').textContent = formatPercent(totals.ratios.saifullahCostRatio);
            document.getElementById('ratio_totalLabor').textContent = formatPercent(totals.ratios.totalLaborCostRatio);

            // Viability Alert
            updateViabilityAlert();
        }

        function updateCostBreakdown() {
            const costs = calculationResults.breakdown.fixedCosts;
            const total = costs.total;
            const revenue = calculationResults.totals.totalRevenue;

            const costItems = [
                { name: 'Team Salaries Budget', value: costs.teamSalariesBudget },
                { name: 'Mobile Allowance', value: costs.mobileAllowance },
                { name: 'Software & ATS Subscriptions', value: costs.softwareSubscriptions },
                { name: 'Transportation', value: costs.transportation },
                { name: 'Marketing & Advertising', value: costs.marketing },
                { name: 'Commission Reserve', value: costs.commissionReserve },
                { name: 'Bonus Reserve', value: costs.bonusReserve },
                { name: 'Refund/Replacement Reserve', value: costs.refundReserve },
                { name: 'Admin Salary', value: costs.adminSalary },
                { name: 'Telephone/Landline', value: costs.telephone },
                { name: 'IT Support', value: costs.itSupport },
                { name: 'Accounting Services', value: costs.accountingServices },
                { name: 'Branding/Marketing Indirect', value: costs.brandingMarketing },
                { name: 'Licensing Fees', value: costs.licensingFees }
            ];

            let html = '';
            costItems.forEach(item => {
                const percentOfFixed = total > 0 ? (item.value / total) * 100 : 0;
                const percentOfRevenue = revenue > 0 ? (item.value / revenue) * 100 : 0;
                html += `
                    <tr>
                        <td>${item.name}</td>
                        <td class="currency">${formatCurrency(item.value)}</td>
                        <td class="currency">${formatPercent(percentOfFixed)}</td>
                        <td class="currency">${formatPercent(percentOfRevenue)}</td>
                    </tr>
                `;
            });

            html += `
                <tr style="background: var(--background); font-weight: 700;">
                    <td>TOTAL FIXED COSTS</td>
                    <td class="currency">${formatCurrency(total)}</td>
                    <td class="currency">100.00%</td>
                    <td class="currency">${formatPercent(revenue > 0 ? (total / revenue) * 100 : 0)}</td>
                </tr>
            `;

            document.getElementById('costBreakdownTable').innerHTML = html;
        }

        function updateViabilityAlert() {
            const netProfit = calculationResults.totals.netProfit;
            const margin = calculationResults.totals.profitMargin;
            const alertDiv = document.getElementById('viabilityAlert');

            let alertClass, message, icon;

            if (netProfit > 0 && margin > 15) {
                alertClass = 'alert-success';
                icon = 'ğŸŸ¢';
                message = 'EXCELLENT: Business is highly profitable with healthy margins above 15%!';
            } else if (netProfit > 0 && margin <= 15) {
                alertClass = 'alert-warning';
                icon = 'ğŸŸ¡';
                message = 'CAUTION: Business is profitable but margins are below 15%. Consider cost optimization.';
            } else {
                alertClass = 'alert-danger';
                icon = 'ğŸ”´';
                message = 'CRITICAL: Business is operating at a loss. Immediate action required to increase revenue or reduce costs.';
            }

            alertDiv.innerHTML = `
                <div class="alert ${alertClass}">
                    <div style="font-size: 2em;">${icon}</div>
                    <div>
                        <strong>Business Viability Status:</strong><br>
                        ${message}
                    </div>
                </div>
            `;
        }

        function updateTeamPerformance() {
            // Individual Performance Table
            let html = '';
            calculationResults.employees.forEach(emp => {
                let statusBadge, statusClass;
                if (emp.achievementPercentage >= 100) {
                    statusBadge = 'âœ… Met';
                    statusClass = 'badge-success';
                } else if (emp.achievementPercentage >= 80) {
                    statusBadge = 'âš ï¸ Near';
                    statusClass = 'badge-warning';
                } else {
                    statusBadge = 'âŒ Below';
                    statusClass = 'badge-danger';
                }

                html += `
                    <tr>
                        <td><strong>${emp.name}</strong></td>
                        <td>${emp.role}</td>
                        <td>${emp.target}</td>
                        <td>${emp.bcPlacements}</td>
                        <td>${emp.execPlacements}</td>
                        <td><strong>${emp.totalPlacements}</strong></td>
                        <td>${formatPercent(emp.achievementPercentage)}</td>
                        <td><span class="badge ${statusClass}">${statusBadge}</span></td>
                        <td class="currency">${formatCurrency(emp.revenue)}</td>
                        <td class="currency">${formatCurrency(emp.baseSalary)}</td>
                        <td class="currency">${formatCurrency(emp.individualBonus)}</td>
                        <td class="currency">${formatCurrency(emp.topPerformerBonus)}</td>
                        <td class="currency"><strong>${formatCurrency(emp.totalCompensation)}</strong></td>
                        <td class="currency" style="color: ${emp.roi >= 0 ? 'var(--success)' : 'var(--danger)'}">${formatCurrency(emp.roi)}</td>
                    </tr>
                `;
            });
            document.getElementById('teamPerformanceTable').innerHTML = html;

            // Top Performers Ranking
            const sorted = [...calculationResults.employees]
                .filter(emp => emp.totalPlacements > 0)
                .sort((a, b) => b.totalPlacements - a.totalPlacements)
                .slice(0, 3);

            let rankingHtml = '';
            sorted.forEach((emp, index) => {
                const icons = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
                const classes = ['first', 'second', 'third'];
                const badges = ['ğŸ†', 'â­', 'ğŸ’ª'];
                const percentOfRevenue = calculationResults.totals.totalRevenue > 0 ? 
                    (emp.revenue / calculationResults.totals.totalRevenue) * 100 : 0;

                rankingHtml += `
                    <div class="rank-card ${classes[index]}">
                        <div class="rank-icon">${icons[index]}</div>
                        <h3>${emp.name}</h3>
                        <div style="font-size: 1.2em; margin: 10px 0;">${emp.role}</div>
                        <div style="font-size: 2em; font-weight: 700; margin: 15px 0;">${emp.totalPlacements} Placements</div>
                        <div style="margin: 10px 0;">Revenue: ${formatCurrency(emp.revenue)}</div>
                        <div style="margin: 10px 0;">${formatPercent(percentOfRevenue)} of Total Revenue</div>
                        <div style="margin: 10px 0;">Top Performer Bonus: ${formatCurrency(emp.topPerformerBonus)}</div>
                        <div style="font-size: 2em; margin-top: 10px;">${badges[index]}</div>
                    </div>
                `;
            });

            if (sorted.length === 0) {
                rankingHtml = '<div class="card"><p style="text-align: center; padding: 40px; color: #666;">No placements recorded yet</p></div>';
            }

            document.getElementById('topPerformersRanking').innerHTML = rankingHtml;

            // Team Summary
            const totals = calculationResults.totals;
            document.getElementById('summary_totalPlacements').textContent = totals.totalPlacements;
            document.getElementById('summary_totalRevenue').textContent = formatCurrency(totals.totalRevenue);
            document.getElementById('summary_teamComp').textContent = formatCurrency(totals.totalTeamCompensation);
            document.getElementById('summary_saifullahShare').textContent = formatCurrency(totals.saifullahShare);
        }

        function updateBreakevenTab() {
            const be = calculationResults.breakeven;
            const totals = calculationResults.totals;

            document.getElementById('be_currentRevenue').textContent = formatCurrency(be.currentRevenue);
            document.getElementById('be_breakevenRequired').textContent = formatCurrency(be.breakevenRevenue);
            
            const gapElement = document.getElementById('be_gap');
            gapElement.textContent = formatCurrency(Math.abs(be.gap));
            gapElement.style.color = be.gap >= 0 ? 'var(--success)' : 'var(--danger)';

            const statusElement = document.getElementById('be_status');
            if (be.isAboveBreakeven) {
                statusElement.innerHTML = 'âœ… Above Breakeven';
                statusElement.style.color = 'var(--success)';
            } else {
                statusElement.innerHTML = 'âŒ Below Breakeven';
                statusElement.style.color = 'var(--danger)';
            }

            document.getElementById('be_workingDays').textContent = getValue('workingDays');
            document.getElementById('be_dailyBreakeven').textContent = formatCurrency(be.dailyBreakeven);
            document.getElementById('be_currentDaily').textContent = formatCurrency(be.currentDaily);

            // Scenarios Table
            let scenariosHtml = '';
            be.scenarios.forEach(scenario => {
                scenariosHtml += `
                    <tr>
                        <td><strong>${scenario.name}</strong></td>
                        <td>${scenario.mix}</td>
                        <td class="currency"><strong>${scenario.totalPlacementsNeeded}</strong></td>
                        <td class="currency">${scenario.perDay}</td>
                        <td class="currency">${scenario.bcPlacements}</td>
                        <td class="currency">${scenario.execPlacements}</td>
                    </tr>
                `;
            });
            document.getElementById('scenariosTable').innerHTML = scenariosHtml;
        }

        function updateScenarioAnalysis() {
            const baseData = {
                employees: calculationResults.employees,
                fixedCosts: calculationResults.totals.fixedCostsTotal,
                saifullahPercent: getValue('saifullahPercentage'),
                blueCollarFee: getValue('blueCollarFee'),
                executiveFee: getValue('executiveFee')
            };

            const scenarios = [
                { name: '50% of Target', multiplier: 0.5 },
                { name: '75% of Target', multiplier: 0.75 },
                { name: '100% of Target (CURRENT)', multiplier: 1.0 },
                { name: '120% of Target', multiplier: 1.2 },
                { name: '150% of Target', multiplier: 1.5 }
            ];

            let html = '';
            scenarios.forEach(scenario => {
                // Calculate revenue at this scenario level
                let scenarioRevenue = 0;
                let scenarioBonuses = 0;
                let scenarioSalaries = 0;

                baseData.employees.forEach(emp => {
                    // Scale placements
                    const scaledBC = Math.floor(emp.bcPlacements * scenario.multiplier);
                    const scaledExec = Math.floor(emp.execPlacements * scenario.multiplier);
                    const scaledTotal = scaledBC + scaledExec;
                    const scaledAchievement = emp.target > 0 ? (scaledTotal / emp.target) * 100 : 0;

                    // Calculate revenue
                    scenarioRevenue += (scaledBC * baseData.blueCollarFee) + (scaledExec * baseData.executiveFee);
                    scenarioSalaries += emp.baseSalary;

                    // Calculate bonus
                    if (scaledAchievement >= 150) {
                        scenarioBonuses += getValue('bonus150');
                    } else if (scaledAchievement >= 120) {
                        scenarioBonuses += getValue('bonus120');
                    } else if (scaledAchievement >= 100) {
                        scenarioBonuses += getValue('bonus100');
                    } else if (scaledAchievement >= 80) {
                        scenarioBonuses += getValue('bonus80');
                    }
                });

                // Add estimated top performer bonuses (only if placements exist)
                let topBonusCount = 0;
                baseData.employees.forEach(emp => {
                    const scaledTotal = Math.floor((emp.bcPlacements + emp.execPlacements) * scenario.multiplier);
                    if (scaledTotal > 0) topBonusCount++;
                });
                if (topBonusCount >= 1) scenarioBonuses += getValue('firstPlaceBonus');
                if (topBonusCount >= 2) scenarioBonuses += getValue('secondPlaceBonus');
                if (topBonusCount >= 3) scenarioBonuses += getValue('thirdPlaceBonus');

                // Calculate P&L with NEW FORMULA
                const teamComp = scenarioSalaries + scenarioBonuses;
                const saifullahShare = teamComp * (baseData.saifullahPercent / 100);
                const totalCosts = teamComp + saifullahShare + baseData.fixedCosts;
                const netProfit = scenarioRevenue - totalCosts;
                const margin = scenarioRevenue > 0 ? (netProfit / scenarioRevenue) * 100 : 0;

                const rowClass = scenario.multiplier === 1.0 ? 'current-row' : '';

                html += `
                    <tr class="${rowClass}">
                        <td><strong>${scenario.name}</strong></td>
                        <td class="currency">${formatCurrency(scenarioRevenue)}</td>
                        <td class="currency">${formatCurrency(teamComp)}</td>
                        <td class="currency">${formatCurrency(saifullahShare)}</td>
                        <td class="currency">${formatCurrency(baseData.fixedCosts)}</td>
                        <td class="currency">${formatCurrency(totalCosts)}</td>
                        <td class="currency" style="color: ${netProfit >= 0 ? 'var(--success)' : 'var(--danger)'}"><strong>${formatCurrency(netProfit)}</strong></td>
                        <td class="currency">${formatPercent(margin)}</td>
                    </tr>
                `;
            });

            document.getElementById('scenarioAnalysisTable').innerHTML = html;
        }

        function updateExpenseReport() {
            const costs = calculationResults.breakdown.fixedCosts;
            const total = costs.total;
            const revenue = calculationResults.totals.totalRevenue;
            const totalExpenses = calculationResults.totals.totalExpenses;

            const expenseItems = [
                { name: 'Team Salaries Budget', value: costs.teamSalariesBudget, benchmark: '10-15%' },
                { name: 'Mobile Allowance', value: costs.mobileAllowance, benchmark: '2-3%' },
                { name: 'Software & ATS Subscriptions', value: costs.softwareSubscriptions, benchmark: '8-12%' },
                { name: 'Transportation', value: costs.transportation, benchmark: '2-3%' },
                { name: 'Marketing & Advertising', value: costs.marketing, benchmark: '10-15%' },
                { name: 'Commission Reserve', value: costs.commissionReserve, benchmark: '10-12%' },
                { name: 'Bonus Reserve', value: costs.bonusReserve, benchmark: '2-4%' },
                { name: 'Refund/Replacement Reserve', value: costs.refundReserve, benchmark: '8-10%' },
                { name: 'Admin Salary', value: costs.adminSalary, benchmark: '4-6%' },
                { name: 'Telephone/Landline', value: costs.telephone, benchmark: '<1%' },
                { name: 'IT Support', value: costs.itSupport, benchmark: '1-2%' },
                { name: 'Accounting Services', value: costs.accountingServices, benchmark: '1-2%' },
                { name: 'Branding/Marketing Indirect', value: costs.brandingMarketing, benchmark: '1-2%' },
                { name: 'Licensing Fees', value: costs.licensingFees, benchmark: '1%' }
            ];

            let html = '';
            expenseItems.forEach(item => {
                const percentOfRevenue = revenue > 0 ? (item.value / revenue) * 100 : 0;
                const percentOfExpenses = totalExpenses > 0 ? (item.value / totalExpenses) * 100 : 0;
                
                let status, statusClass;
                if (percentOfRevenue < 5) {
                    status = 'âœ… Normal';
                    statusClass = 'badge-success';
                } else if (percentOfRevenue < 15) {
                    status = 'âš ï¸ High';
                    statusClass = 'badge-warning';
                } else {
                    status = 'ğŸ”´ Critical';
                    statusClass = 'badge-danger';
                }

                html += `
                    <tr>
                        <td><strong>${item.name}</strong></td>
                        <td class="currency">${formatCurrency(item.value)}</td>
                        <td class="currency">${formatPercent(percentOfRevenue)}</td>
                        <td class="currency">${formatPercent(percentOfExpenses)}</td>
                        <td>${item.benchmark}</td>
                        <td><span class="badge ${statusClass}">${status}</span></td>
                    </tr>
                `;
            });

            document.getElementById('expenseReportTable').innerHTML = html;

            // Expense Visualization
            let vizHtml = '<h3 style="margin-bottom: 20px;">Top 5 Expenses</h3>';
            const sortedExpenses = expenseItems
                .sort((a, b) => b.value - a.value)
                .slice(0, 5);

            sortedExpenses.forEach(item => {
                const percent = total > 0 ? (item.value / total) * 100 : 0;
                vizHtml += `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>${item.name}</strong>
                            <span>${formatCurrency(item.value)} (${formatPercent(percent)})</span>
                        </div>
                        <div class="cost-bar">
                            <div class="cost-bar-fill" style="width: ${percent}%"></div>
                        </div>
                    </div>
                `;
            });

            document.getElementById('expenseVisualization').innerHTML = vizHtml;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CSV EXPORT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function exportCSV() {
            const totals = calculationResults.totals;
            const be = calculationResults.breakeven;
            
            let csv = 'HR COMMISSION CALCULATOR - COMPLETE REPORT\n\n';
            
            // Section 1: Summary Metrics
            csv += 'SUMMARY METRICS\n';
            csv += 'Metric,Value\n';
            csv += `Total Revenue,${totals.totalRevenue.toFixed(2)}\n`;
            csv += `Total Team Compensation,${totals.totalTeamCompensation.toFixed(2)}\n`;
            csv += `Saifullah Share (${getValue('saifullahPercentage')}% of Team Comp),${totals.saifullahShare.toFixed(2)}\n`;
            csv += `Net Team Cost,${totals.netTeamCost.toFixed(2)}\n`;
            csv += `Fixed Costs,${totals.fixedCostsTotal.toFixed(2)}\n`;
            csv += `Total Expenses,${totals.totalExpenses.toFixed(2)}\n`;
            csv += `Net Profit,${totals.netProfit.toFixed(2)}\n`;
            csv += `Profit Margin %,${totals.profitMargin.toFixed(2)}\n`;
            csv += `Breakeven Required,${be.breakevenRevenue.toFixed(2)}\n`;
            csv += `Total Placements,${totals.totalPlacements}\n\n`;

            // Section 2: Team Performance
            csv += 'TEAM PERFORMANCE\n';
            csv += 'Name,Role,Target,BC Placements,Exec Placements,Total Placements,Achievement %,Revenue,Base Salary,Individual Bonus,Top Performer Bonus,Total Compensation,ROI\n';
            calculationResults.employees.forEach(emp => {
                csv += `${emp.name},${emp.role},${emp.target},${emp.bcPlacements},${emp.execPlacements},${emp.totalPlacements},${emp.achievementPercentage.toFixed(2)},${emp.revenue.toFixed(2)},${emp.baseSalary.toFixed(2)},${emp.individualBonus.toFixed(2)},${emp.topPerformerBonus.toFixed(2)},${emp.totalCompensation.toFixed(2)},${emp.roi.toFixed(2)}\n`;
            });
            csv += '\n';

            // Section 3: Fixed Costs
            csv += 'FIXED COSTS BREAKDOWN\n';
            csv += 'Category,Amount\n';
            const costs = calculationResults.breakdown.fixedCosts;
            csv += `Team Salaries Budget,${costs.teamSalariesBudget.toFixed(2)}\n`;
            csv += `Mobile Allowance,${costs.mobileAllowance.toFixed(2)}\n`;
            csv += `Software & ATS Subscriptions,${costs.softwareSubscriptions.toFixed(2)}\n`;
            csv += `Transportation,${costs.transportation.toFixed(2)}\n`;
            csv += `Marketing & Advertising,${costs.marketing.toFixed(2)}\n`;
            csv += `Commission Reserve,${costs.commissionReserve.toFixed(2)}\n`;
            csv += `Bonus Reserve,${costs.bonusReserve.toFixed(2)}\n`;
            csv += `Refund/Replacement Reserve,${costs.refundReserve.toFixed(2)}\n`;
            csv += `Admin Salary,${costs.adminSalary.toFixed(2)}\n`;
            csv += `Telephone/Landline,${costs.telephone.toFixed(2)}\n`;
            csv += `IT Support,${costs.itSupport.toFixed(2)}\n`;
            csv += `Accounting Services,${costs.accountingServices.toFixed(2)}\n`;
            csv += `Branding/Marketing Indirect,${costs.brandingMarketing.toFixed(2)}\n`;
            csv += `Licensing Fees,${costs.licensingFees.toFixed(2)}\n`;
            csv += `TOTAL FIXED COSTS,${costs.total.toFixed(2)}\n\n`;

            // Section 4: P&L Statement
            csv += 'PROFIT & LOSS STATEMENT\n';
            csv += 'Item,Amount\n';
            csv += `Total Revenue,${totals.totalRevenue.toFixed(2)}\n`;
            csv += `Team Base Salaries,${totals.totalBaseSalaries.toFixed(2)}\n`;
            csv += `Individual Bonuses,${totals.totalIndividualBonuses.toFixed(2)}\n`;
            csv += `Top Performer Bonuses,${totals.totalTopPerformerBonuses.toFixed(2)}\n`;
            csv += `Total Team Compensation,${totals.totalTeamCompensation.toFixed(2)}\n`;
            csv += `Saifullah Share (${getValue('saifullahPercentage')}%),${totals.saifullahShare.toFixed(2)}\n`;
            csv += `Net Team Cost,${totals.netTeamCost.toFixed(2)}\n`;
            csv += `Fixed Costs,${totals.fixedCostsTotal.toFixed(2)}\n`;
            csv += `Total Expenses,${totals.totalExpenses.toFixed(2)}\n`;
            csv += `NET PROFIT,${totals.netProfit.toFixed(2)}\n\n`;

            // Section 5: Financial Ratios
            csv += 'FINANCIAL RATIOS\n';
            csv += 'Ratio,Value (%)\n';
            csv += `Team Compensation Ratio,${totals.ratios.teamCompRatio.toFixed(2)}\n`;
            csv += `Fixed Cost Ratio,${totals.ratios.fixedCostRatio.toFixed(2)}\n`;
            csv += `Saifullah Cost Ratio,${totals.ratios.saifullahCostRatio.toFixed(2)}\n`;
            csv += `Total Labor Cost Ratio,${totals.ratios.totalLaborCostRatio.toFixed(2)}\n`;
            csv += `Profit Margin,${totals.profitMargin.toFixed(2)}\n\n`;

            // Download CSV
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `commission_report_${new Date().toISOString().slice(0,10)}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            showToast('âœ… CSV Report Downloaded Successfully!', 'success');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALIZATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        window.onload = function() {
            loadData();
            // Auto-calculate if data exists
            if (getValue('ravi_bc') > 0 || getValue('kaja_bc') > 0 || getValue('romil_bc') > 0 || 
                getValue('saba_bc') > 0 || getValue('niroshan_bc') > 0) {
                calculate();
            }
        };

        // Auto-save on any input change
        document.addEventListener('input', function(e) {
            if (e.target.type === 'number') {
                saveData();
            }
        });
    </script>
</body>
</html>